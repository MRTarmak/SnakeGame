#include <iostream>
#include <string>
#include "random_int.cpp"
#include "snake.cpp"

#define HEIGHT 20
#define WIDTH 50
#define FIELD {"##################################################\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "#................................................#\n", \
               "##################################################\n"};

class Field {
public:
    Field() {
        snake.segments.emplace_back(random_int(1, HEIGHT - 2), random_int(0, WIDTH - 2));
        score = 0;
        update_field();
    }

    void update_apple() {
        apple = {random_int(1, HEIGHT - 2), random_int(0, WIDTH - 2)};
    }

    void update_field() {
        // TODO
    }

    void print_field() {
        std::cout << "Score: " << score << std::endl;
        for (const std::string &str : field) {
            std::cout << str;
        }
        std::cout << std::endl;
    }

private:
    std::string field[HEIGHT] = FIELD;
    std::pair<int, int> apple;
    Snake snake;
    int score;
};